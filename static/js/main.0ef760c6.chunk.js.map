{"version":3,"sources":["components/Annotation.js","components/AnnotationButton.js","components/MainText.js","components/MainPage.js","App.js","serviceWorker.js","index.js"],"names":["Annotation","this","_groups","id","_id","nodes","start","_start","end","_end","depth","_depth","title","_title","desc","_description","sel","_selection","color","_color","colors","AnnotationButton","props","state","isShowing","isHighlighted","isEditing","handleOnShow","bind","handleOnClose","handleColorChange","handleHover","handleEditMode","handleViewMode","c","setState","annotation","updater","e","document","getElementsByClassName","length","contains","target","stopPropagation","description","getElementById","value","color_buttons","map","onClick","className","key","style","backgroundColor","onMouseOver","background","lineHeight","paddingBottom","children","size","defaultValue","type","React","Component","MainText","ANNOTATIONS","annotation_id","maxDepth","text","textPanes","isShowHelp","isShowImport","isShowImportAnnotations","isShowExportAnnotations","handleMouseUp","handleRerender","handleAppend","handleAppendEnter","handleClear","onSetSidebarOpen","handleExample","handleShowImport","handleImportAppend","handleImportReplace","handleShowHelp","handleShowExportAnnotations","handleShowImportAnnotations","handleImportAnnotations","ann","reloadTextPanes","pane_list","i","modified_children","Array","isArray","console","log","getSelection","toString","input","getUserInput","selection","styleSelection","empty","window","prompt","containerid","startIndex","getTotalOffset","anchorNode","anchorOffset","endIndex","focusNode","focusOffset","temp","getDepthRange","Math","max","updatedtextPanes","startInd","endInd","String","x","processAnnotation","concat","push","validDepths","previous","d","anchor","escaped","offset","textContent","substring","replace","node","previousSibling","parentNode","new_annotation","prev_annotation","prev_start","prev_end","startHighlight","prev_len","endHighlight","slice","parseInt","prev_children","newPanes","keys","open","sidebarOpen","textbody","onKeyUp","onMouseUp","sidebarContent","width","fontSize","height","placeholder","readOnly","JSON","stringify","padding","sidebar","onSetOpen","styles","minHeight","a1","a2","a3","a4","annotations","parse","regenerateAnnotations","regenerateTextPanes","regenerated","_startIndex","_endIndex","ann_refs","MainPage","isExample","App","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0ef760c6.chunk.js","sourcesContent":["export default class Annotation {\r\n\tconstructor() {\r\n\t\tthis._groups = []\r\n\t}\r\n\t//MUTATORS\r\n\tset id(id) {\r\n\t\tthis._id = id;\r\n\t}\r\n\tset groups(nodes) {\r\n\t\tthis._groups = nodes;\r\n\t}\r\n\tset startIndex(start) {\r\n\t\tthis._start = start;\r\n\t}\r\n\tset endIndex(end) {\r\n\t\tthis._end = end;\r\n\t}\r\n\tset depth(depth) {\r\n\t\tthis._depth = depth;\r\n\t}\r\n\tset title(title) {\r\n\t\tthis._title = title;\r\n\t}\r\n\tset description(desc) {\r\n\t\tthis._description = desc;\r\n\t}\r\n\tset selection(sel) {\r\n\t\tthis._selection = sel;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._color = color;\r\n\t}\r\n\t// ACCESSORS\r\n\tget id() {\r\n\t\treturn this._id;\r\n\t}\r\n\tget groups() {\r\n\t\treturn this._groups;\r\n\t}\r\n\tget startIndex() {\r\n\t\treturn this._start;\r\n\t}\r\n\tget endIndex() {\r\n\t\treturn this._end;\r\n\t}\r\n\tget depth() {\r\n\t\treturn this._depth;\r\n\t}\r\n\tget title() {\r\n\t\treturn this._title;\r\n\t}\r\n\tget description() {\r\n\t\treturn this._description;\r\n\t}\r\n\tget selection() {\r\n\t\treturn this._selection;\r\n\t}\r\n\tget color() {\r\n\t\treturn this._color;\r\n\t}\r\n}","import React from 'react';\r\nimport { FaPen } from 'react-icons/fa'\r\n\r\nimport './Annotation.css'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class AnnotationButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t\tisHighlighted: false,\r\n\t\t\tcolor: this.props.color,\r\n\t\t\tisEditing: false\r\n\t\t}\r\n\t\tthis.handleOnShow = this.handleOnShow.bind(this);\r\n\t\tthis.handleOnClose = this.handleOnClose.bind(this);\r\n\t\tthis.handleColorChange = this.handleColorChange.bind(this);\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.handleEditMode = this.handleEditMode.bind(this);\r\n\t\tthis.handleViewMode = this.handleViewMode.bind(this);\r\n\t}\r\n\r\n\thandleHover() {\r\n\t}\r\n\r\n\thandleColorChange(c) {\r\n\t\tthis.setState({color: c});\r\n\t\tthis.props.annotation.color = c;\r\n\t\tthis.props.updater(this.props.annotation, c);\r\n\t}\r\n\r\n\thandleOnShow() {\r\n\t\tif (!this.state.isShowing){\r\n\t\t\tthis.setState({ isShowing: true });\r\n\t\t}\r\n\t}\r\n\r\n\thandleOnClose(e) {\r\n\t\tif (document.getElementsByClassName(\"modal\").length && \r\n\t\t\t!document.getElementsByClassName(\"modal\")[0].contains(e.target)){\r\n\t\t\tthis.setState({ isShowing: false });\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\thandleEditMode() {\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\thandleViewMode() {\r\n\t\tthis.props.annotation.description = document.getElementById(\"updatedDescription\").value;\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\trender() {\r\n\t\t//console.log(\"btn rerender\")\r\n\t\tlet color_buttons = colors.map((c) => <span onClick={ () => this.handleColorChange(c) } \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"color-selector\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={c} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: c}}></span>)\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<span className={ this.state.isHighlighted ? \"annotation-btn\" : \"annotation-btn\"} \r\n\t\t\t\t\tonMouseOver={ this.handleHover }\r\n\t\t\t\t\tonClick={ this.handleOnShow }\r\n\t\t\t\t\tstyle={ {background: `linear-gradient(0deg, ${this.props.annotation.color}, white 1px, transparent 1px)`,\r\n\t\t\t\t\t\t\tlineHeight: \"\"+(20+(this.props.depth-1))+\"px\",\r\n\t\t\t\t\t\t\tpaddingBottom: \"\"+(4*(this.props.depth-1))+\"px\",\r\n\t\t\t\t\t\t\tcolor: this.props.annotation.color} }>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t\t</span>\r\n\t\t\t\t{ \r\n\t\t\t\t\tthis.state.isShowing && \r\n\t\t\t\t\t<div className=\"modal-bg\" onClick={ this.handleOnClose } style={ {color: \"black\"} }>\r\n\t\t\t\t\t\t<div className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-inner\">\r\n\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t{ color_buttons }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t!this.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"modal-desc-text\">\r\n\t\t\t\t\t\t\t\t\t\t{ this.props.annotation.description }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\t\t\t<span className=\"lowOptions\" onClick={ this.handleEditMode } size={5}>\r\n\t\t\t\t\t\t\t\t\t\t<FaPen/>\r\n\t\t\t\t\t\t\t\t\t</span>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<textarea id=\"updatedDescription\" defaultValue={ this.props.annotation.description }></textarea>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={ this.handleViewMode }>Update Description</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport Sidebar from 'react-sidebar';\r\nimport { FaBars, FaTrash, FaChevronCircleDown, FaChevronCircleUp } from 'react-icons/fa'\r\n\r\nimport Annotation from './Annotation'\r\nimport AnnotationButton from './AnnotationButton'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class MainText extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tANNOTATIONS: [],\r\n\t\t\tannotation_id: 1,\r\n\t\t\tmaxDepth: 0,\r\n\t\t\ttext: \"\",\r\n\t\t\ttextPanes: [],\r\n\t\t\tisShowHelp: true,\r\n\t\t\tisShowImport: false, \r\n\t\t\tisShowImportAnnotations: false,\r\n\t\t\tisShowExportAnnotations: false\r\n\t\t};\r\n\r\n\t\tthis.handleMouseUp = this.handleMouseUp.bind(this);\r\n\t\tthis.handleRerender = this.handleRerender.bind(this);\r\n\t\tthis.handleAppend = this.handleAppend.bind(this);\r\n\t\tthis.handleAppendEnter = this.handleAppendEnter.bind(this);\r\n\t\tthis.handleClear = this.handleClear.bind(this);\r\n\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t\tthis.handleShowImport = this.handleShowImport.bind(this);\r\n\t\tthis.handleImportAppend = this.handleImportAppend.bind(this);\r\n\t\tthis.handleImportReplace = this.handleImportReplace.bind(this);\r\n\t\tthis.handleShowHelp = this.handleShowHelp.bind(this);\r\n\t\r\n\t\tthis.handleShowExportAnnotations = this.handleShowExportAnnotations.bind(this);\r\n\t\tthis.handleShowImportAnnotations = this.handleShowImportAnnotations.bind(this);\r\n\t\tthis.handleImportAnnotations = this.handleImportAnnotations.bind(this);\r\n\t}\r\n\r\n\thandleRerender(ann, color) { // update colors\r\n\t\tthis.reloadTextPanes(this.state.textPanes, ann, color);\r\n\t}\r\n\r\n\treloadTextPanes(pane_list, ann, color) {\r\n\t\tfor (var i=0; i<pane_list.length; i++){\r\n\t\t\tif (pane_list[i].props && pane_list[i].props.children) {\r\n\t\t\t\t//reload children\r\n\t\t\t\tvar modified_children = pane_list[i].props.children;\r\n\t\t\t\tif (!Array.isArray(modified_children)){\r\n\t\t\t\t\tmodified_children = [modified_children];\r\n\t\t\t\t}\r\n\t\t\t\tthis.reloadTextPanes(modified_children, ann, color);\r\n\r\n\t\t\t\tpane_list[i] =\r\n\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ pane_list[i].key }\r\n\t\t\t\t\t\tdepth={ pane_list[i].props.depth }\r\n\t\t\t\t\t\tannotation={ pane_list[i].props.annotation }\r\n\t\t\t\t\t\tcolor={ pane_list[i].props.annotation===ann ? color : pane_list[i].props.annotation.color } >\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState(this.state);\r\n\t}\r\n\r\n\thandleMouseUp() {\r\n\t\tif (document.getElementsByClassName(\"modal\").length){\r\n\t\t\tconsole.log(\"Hi\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.getSelection() && document.getSelection().toString().length>0) {    // all browsers, except IE before version 9\r\n\t\t\tconsole.log(\"Why\");\r\n\t\t\tvar sel = document.getSelection();\r\n        \tvar input = this.getUserInput();\r\n        \tvar annotation = new Annotation();\r\n        \tannotation.description = input;\r\n        \tannotation.selection = sel;\r\n        \tthis.styleSelection(sel, annotation, \"textbody\");\r\n        \tsel.empty();\r\n  \t\t}\r\n\t}\r\n\r\n\tgetUserInput() {\r\n\t\treturn window.prompt(\"What is this annotation for?\",\"\");\r\n\t}\r\n\r\n\tstyleSelection(sel, annotation, containerid) {\r\n\t\tannotation.id = this.state.annotation_id;\r\n\t\tannotation.startIndex = this.getTotalOffset(sel.anchorNode, sel.anchorOffset, containerid);\r\n\t\tannotation.endIndex = this.getTotalOffset(sel.focusNode, sel.focusOffset, containerid);\r\n\r\n\t\tif (annotation.startIndex > annotation.endIndex) {\r\n\t\t\tvar temp = annotation.startIndex;\r\n\t\t\tannotation.startIndex = annotation.endIndex;\r\n\t\t\tannotation.endIndex = temp;\r\n\t\t}\r\n\r\n\t\tvar depth = this.getDepthRange(annotation);\r\n\t\tannotation.depth = depth;\r\n\t\tthis.setState({ maxDepth: Math.max(this.state.maxDepth, depth) });\r\n\r\n\t\tconsole.log(annotation.startIndex);\r\n\t\tconsole.log(annotation.endIndex);\r\n\r\n\t\t//no modification necessary\r\n\t\tvar updatedtextPanes = []\r\n\t\tvar startInd = 0;\r\n\t\tvar endInd = this.state.text.length;\r\n\t\tfor (var i=0; i<this.state.textPanes.length; i++){\r\n\t\t\tif (typeof this.state.textPanes[i] === 'string' || this.state.textPanes[i] instanceof String) {\r\n\t\t\t\tendInd = startInd + this.state.textPanes[i].length;\r\n\t\t\t}\r\n\t\t\telse if (this.state.textPanes[i].type==='br') {\r\n\t\t\t\tendInd = startInd; //while it is treated as \\n in text, it doesn't count as a valid reduction of length\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendInd = this.state.textPanes[i].props.annotation.endIndex;\r\n\t\t\t}\r\n\t\t\tvar x = this.processAnnotation(annotation, this.state.textPanes[i], startInd, endInd);\r\n\t\t\tupdatedtextPanes=updatedtextPanes.concat(x);\r\n\t\t\tstartInd = endInd;\r\n\t\t}\r\n\r\n\t\tthis.setState({textPanes: updatedtextPanes});\r\n\t\tthis.setState({annotation_id: this.state.annotation_id+1});\r\n\t\tthis.state.ANNOTATIONS.push(annotation);\r\n\t}\r\n\r\n\tgetDepthRange(annotation) {\r\n\t\tvar validDepths = [];\r\n\t\tfor (var i=0; i<this.state.maxDepth+1; i++){\r\n\t\t\tvalidDepths.push(i+1);\r\n\t\t}\r\n\t\tfor (var previous of this.state.ANNOTATIONS) {\r\n\t\t\tif (previous.startIndex < annotation.endIndex && annotation.startIndex < previous.endIndex) {\r\n\t\t\t\tvalidDepths[previous.depth - 1] = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var d of validDepths){\r\n\t\t\tif (d>0) {\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.state.maxDepth+1;\r\n\t}\r\n\r\n\tgetTotalOffset(anchor, anchorOffset, containerid) {\r\n\t\tvar escaped = /(\\t|\\r)+/;\r\n\t\tvar offset = anchorOffset - (anchor.textContent.substring(0,anchorOffset).length - anchor.textContent.substring(0,anchorOffset).replace(escaped,'').length);\r\n\t\tvar node = anchor;\r\n\t\twhile (node !== document.getElementById(containerid)) {\r\n\t\t\tif (node.previousSibling !== null) {\r\n\t\t\t\tnode = node.previousSibling;\r\n\t\t\t\toffset += node.textContent.replace(escaped,'').length;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset;\r\n\t}\r\n\r\n\tprocessAnnotation(new_annotation, prev_annotation, prev_start, prev_end){\r\n\t\t//intersects\r\n\t\tif (new_annotation.startIndex < prev_end && prev_start < new_annotation.endIndex) {\r\n\r\n\t\t\t//Base case - String\r\n\r\n\t\t\tif (typeof prev_annotation === 'string' || prev_annotation instanceof String){\r\n\t\t\t\tvar startHighlight = new_annotation.startIndex > prev_start ? new_annotation.startIndex - prev_start : 0;\r\n\t\t\t\tvar prev_len = prev_end - prev_start;\r\n\t\t\t\tvar endHighlight = new_annotation.endIndex > prev_end ? prev_len : prev_len - (prev_end - new_annotation.endIndex);\r\n\r\n\t\t\t\tnew_annotation.color = colors[0];\r\n\r\n\t\t\t\treturn [prev_annotation.slice(0,startHighlight),\r\n\t\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) }\r\n\t\t\t\t\t\t\tdepth={ new_annotation.depth }\r\n\t\t\t\t\t\t\tannotation={ new_annotation }\r\n\t\t\t\t\t\t\tcolor={ new_annotation.color } >\r\n\t\t\t\t\t\t\t{prev_annotation.slice(startHighlight,endHighlight)}\r\n\t\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\t\tprev_annotation.slice(endHighlight)]\r\n\t\t\t}\r\n\t\t\telse if (prev_annotation.type==='br') {\r\n\t\t\t\treturn [<br key={ prev_annotation.key }></br>]\r\n\t\t\t}\r\n\r\n\t\t\t//Recurse\r\n\t\t\tvar prev_children = prev_annotation.props.children;\r\n\t\t\tif (!Array.isArray(prev_children)){\r\n\t\t\t\tprev_children = [prev_children];\r\n\t\t\t}\r\n\t\t\tvar modified_children = [];\r\n\t\t\tfor (var i=0; i<prev_children.length; i++){\r\n\t\t\t\tprev_end = (typeof prev_children[i] === 'string' || prev_children[i] instanceof String) ?\r\n\t\t\t\t\tprev_start + prev_children[i].length : prev_children[i].props.annotation.endIndex;\r\n\r\n\t\t\t\tmodified_children = modified_children.concat(this.processAnnotation(new_annotation, prev_children[i], prev_start, prev_end));\r\n\r\n\t\t\t\tprev_start = prev_end;\r\n\t\t\t}\r\n\r\n\t\t\treturn [<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) }\r\n\t\t\t\t\t\tdepth={ prev_annotation.props.depth }\r\n\t\t\t\t\t\tannotation={ prev_annotation.props.annotation }\r\n\t\t\t\t\t\tcolor={ prev_annotation.props.annotation.color }>\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn prev_annotation;\r\n\t\t}\r\n\t}\r\n\r\n\thandleAppend() {\r\n\t\tvar newPanes = this.state.textPanes;\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"append-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({ textPanes : newPanes, text : this.state.text + \"\\n\" + document.getElementById(\"append-text\").value})\r\n\t\tdocument.getElementById(\"append-text\").value = \"\";\r\n\t}\r\n\r\n\thandleAppendEnter(e) {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tthis.handleAppend();\r\n\t\t}\r\n\t}\r\n\r\n\thandleImportReplace() {\r\n\t\tvar newPanes = [];\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"import-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({\r\n\t\t\tANNOTATIONS: [],\r\n\t\t\tannotation_id: 1,\r\n\t\t\tmaxDepth: 0,\r\n\t\t\ttext: \"\",\r\n\t\t\ttextPanes: newPanes\r\n\t\t});\r\n\t\tdocument.getElementById(\"import-text\").value = \"\";\r\n\t}\r\n\t\r\n\thandleImportAppend() {\r\n\t\tvar newPanes = this.state.textPanes;\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"import-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({ textPanes : newPanes, text : this.state.text + \"\\n\" + document.getElementById(\"import-text\").value})\r\n\t\tdocument.getElementById(\"import-text\").value = \"\";\r\n\t}\r\n\r\n\thandleClear() {\r\n\t\tthis.setState({\r\n\t\t\t\tANNOTATIONS: [],\r\n\t\t\t\tannotation_id: 1,\r\n\t\t\t\tkeys: 1,\r\n\t\t\t\tmaxDepth: 0,\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\ttextPanes: []\r\n\t\t\t});\r\n\t}\r\n\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar textbody = (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"nav-append\">\r\n\t\t\t\t\t<input type=\"text\" id=\"append-text\" onKeyUp={ this.handleAppendEnter }></input>\r\n\t\t\t\t\t<button onClick={this.handleAppend} type=\"button\">Append</button>\r\n\t\t\t\t\t<button onClick={this.handleClear} type=\"button\"><FaTrash/></button>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t<div id=\"textbody\" onMouseUp={this.handleMouseUp}>\r\n\t\t\t\t\t{ this.state.textPanes }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tvar sidebarContent =\r\n\t\t\t<div className=\"sideNav\">\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleExample }> Example </p>\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowImport }> Import Plaintext { this.state.isShowImport ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isShowImport &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"import-text\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} } placeholder=\"Enter text to input.\">\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button style={ {width:\"50%\", fontSize: \"0.75em\"} } onClick={this.handleImportReplace} type=\"button\">Replace</button>\r\n\t\t\t\t\t\t<button style={ {width:\"50%\", fontSize: \"0.75em\"} } onClick={this.handleImportAppend} type=\"button\">Append</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowExportAnnotations }> Export Annotations { this.state.isShowExportAnnotations ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{\r\n\t\t\t\t\t this.state.isShowExportAnnotations &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"export-annotations\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} } readOnly value={ JSON.stringify(this.state) }>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowImportAnnotations }> Import Annotations { this.state.isShowImportAnnotations ? <FaChevronCircleUp/> : <FaChevronCircleDown/> } </p>\r\n\t\t\t\t{\r\n\t\t\t\t\t this.state.isShowImportAnnotations &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"import-annotations\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} }>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button style={ {width:\"100%\", fontSize: \"0.75em\"} } onClick={this.handleImportAnnotations} type=\"button\">Load</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowHelp }> Help { this.state.isShowHelp ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{ \r\n\t\t\t\t\tthis.state.isShowHelp &&\r\n\t\t\t\t\t<div style={{fontSize: \"0.75em\", padding: \"0 0.25em\"}}>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Highlight</b> a part of the text to add an annotation.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Click</b> an annotation to view it or modify it.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tUse the top <b>Append</b> bar to add another line to the main text body. Use the <b>Import Plaintext</b> option to append large blocks of text.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tClick on the <b>trash can</b> to clear the body of text.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p> \r\n\t\t\t\t\t\tSave the state of your notebook from <b>Export Annotations</b> and reload it using <b>Import Annotations</b>.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"25%\"} }}>\r\n     \t\t\t\t<div className=\"menuBar\">\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\t\t    \t\t{ textbody }\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tvar a1 = new Annotation();\r\n\t\ta1.id = 1;\r\n\t\ta1.color = colors[1];\r\n\t\ta1.depth = 1;\r\n\t\ta1.startIndex = 19;\r\n\t\ta1.endIndex = 27;\r\n\t\ta1.description = \"cambiar - verb\\nto change\";\r\n\t\tvar a2 = new Annotation();\r\n\t\ta2.id = 2;\r\n\t\ta2.color = colors[0];\r\n\t\ta2.depth = 1;\r\n\t\ta2.startIndex = 42;\r\n\t\ta2.endIndex = 46;\r\n\t\ta2.description = \"emos/amos indicates that the pronoun is \\\"us\\\"\";\r\n\t\tvar a3 = new Annotation();\r\n\t\ta3.id = 3;\r\n\t\ta3.color = colors[1];\r\n\t\ta3.depth = 1;\r\n\t\ta3.startIndex = 99;\r\n\t\ta3.endIndex = 105;\r\n\t\ta3.description = \"cambiar\";\r\n\t\tvar a4 = new Annotation();\r\n\t\ta4.id = 4;\r\n\t\ta4.color = colors[3];\r\n\t\ta4.depth = 1;\r\n\t\ta4.startIndex = 146;\r\n\t\ta4.endIndex = 162;\r\n\t\ta4.description = \"Guatemalan activist and Nobel Peace prize winner\";\r\n\r\n\t\tthis.setState({\r\n\t\t\tANNOTATIONS: [a1, a2, a3, a4],\r\n\t\t\tannotation_id: 5,\r\n\t\t\tmaxDepth: 1,\r\n\t\t\ttext: \"Este mundo no va a cambiar a menos que estemos dispuestos a cambiar nosotros mismos\\nThe world won't change unless we're willing to change ourselves\\nRigoberta Menchu\",\r\n\t\t\ttextPanes:\r\n\t\t\t\t[\"Este mundo no va a \",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a1.id + a1.startIndex + a1.endIndex) }\r\n\t\t\t\t\t\tdepth={ a1.depth }\r\n\t\t\t\t\t\tannotation={ a1 }\r\n\t\t\t\t\t\tcolor={ a1.color }>\r\n\t\t\t\t\t\tcambiar\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" a menos que est\",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a2.id + a2.startIndex + a2.endIndex) }\r\n\t\t\t\t\t\tdepth={ a2.depth }\r\n\t\t\t\t\t\tannotation={ a2 }\r\n\t\t\t\t\t\tcolor={ a2.color }>\r\n\t\t\t\t\t\temos\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" dispuestos a cambiar nosotros mismos\",\r\n\t\t\t\t<br key={1}></br>,\r\n\t\t\t\t\"The world won't \",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a3.id + a3.startIndex + a3.endIndex) }\r\n\t\t\t\t\t\tdepth={ a3.depth }\r\n\t\t\t\t\t\tannotation={ a3 }\r\n\t\t\t\t\t\tcolor={ a3.color }>\r\n\t\t\t\t\t\tchange\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \" unless we're willing to change ourselves\",\r\n\t\t\t\t <br key={2}></br>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a4.id + a4.startIndex + a4.endIndex) }\r\n\t\t\t\t\t\tdepth={ a4.depth }\r\n\t\t\t\t\t\tannotation={ a4 }\r\n\t\t\t\t\t\tcolor={ a4.color }>\r\n\t\t\t\t\t\tRigoberta Menchu\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <br key={3}></br>]\r\n\t\t});\r\n\t\tthis.setState();\r\n\t}\r\n\r\n\thandleShowHelp() {\r\n\t\tthis.setState({ isShowHelp: !this.state.isShowHelp });\r\n\t}\r\n\r\n\thandleShowImport() {\r\n\t\tthis.setState({ isShowImport: !this.state.isShowImport });\r\n\t}\r\n\r\n\thandleShowImportAnnotations() {\r\n\t\tthis.setState({ isShowImportAnnotations: !this.state.isShowImportAnnotations });\r\n\t}\r\n\r\n\thandleShowExportAnnotations() {\r\n\t\tthis.setState({ isShowExportAnnotations: !this.state.isShowExportAnnotations });\r\n\t}\r\n\r\n\thandleImportAnnotations() {\r\n\t\tvar annotations = JSON.parse(document.getElementById(\"import-annotations\").value);\r\n\t\tannotations.ANNOTATIONS = this.regenerateAnnotations(annotations.ANNOTATIONS);\r\n\t\tannotations.textPanes = this.regenerateTextPanes(annotations.textPanes, annotations.ANNOTATIONS);\r\n\t\tthis.setState(annotations);\r\n\t}\r\n\r\n\tregenerateAnnotations(annotations) {\r\n\t\tvar regenerated = []\r\n\t\tvar temp;\r\n\t\tfor (var i=0; i<annotations.length; i++){\r\n\t\t\ttemp = new Annotation();\r\n\t\t\ttemp.id = annotations[i]._id; \r\n\t\t\ttemp.color = annotations[i]._color;\r\n\t\t\ttemp.depth = annotations[i]._depth; \r\n\t\t\ttemp.startIndex = annotations[i]._startIndex;\r\n\t\t\ttemp.endIndex = annotations[i]._endIndex; \r\n\t\t\ttemp.description = annotations[i]._description;\r\n\t\t\tregenerated.push(temp)\r\n\t\t}\r\n\t\treturn regenerated;\r\n\t}\r\n\r\n\tregenerateTextPanes(annotations, ann_refs) {\r\n\t\tvar regenerated = [];\r\n\t\tfor (var i=0; i<annotations.length; i++){\r\n\t\t\tif (typeof annotations[i] === 'string' || annotations[i] instanceof String) {\r\n\t\t\t\tregenerated.push(annotations[i]);\r\n\t\t\t}\r\n\t\t\telse if (annotations[i].type == \"br\") {\r\n\t\t\t\tregenerated.push(<br key={ annotations[i].key }></br>);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tregenerated.push(\r\n\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ annotations[i].key }\r\n\t\t\t\t\t\tdepth={ annotations[i].props.depth }\r\n\t\t\t\t\t\tannotation={ ann_refs[annotations[i].props.annotation._id - 1] }\r\n\t\t\t\t\t\tcolor={ annotations[i].props.annotation.color }>\r\n\t\t\t\t\t\t{ Array.isArray(annotations[i].props.children) ? \r\n\t\t\t\t\t\t\tthis.regenerateTextPanes(annotations[i].props.children, ann_refs) :\r\n\t\t\t\t\t\t\tthis.regenerateTextPanes([annotations[i].props.children], ann_refs)[0] }\r\n\t\t\t\t\t</AnnotationButton>);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn regenerated;\r\n\t}\r\n\r\n}","import React from 'react';\r\n\r\nimport MainText from './MainText';\r\n\r\nexport default class MainPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tisExample: true,\r\n\t\t\tsidebarOpen: false\r\n\t\t};\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t}\r\n\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tthis.setState({ isExample: true });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconsole.log(\"rerender main page\")\r\n\t\tconsole.log(this.state.isExample)\r\n\t\treturn <MainText></MainText>;\r\n\t\t/*\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"10em\"} }}>\r\n     \t\t\t\t\r\n     \t\t\t\t<div className=\"menuBar\">\t\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\r\n\t\t    \t\t<MainText runExample={ this.state.isExample }></MainText>\r\n\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t    */\r\n\t}\r\n}","import React from 'react';\n//import logo from './logo.svg';\n\nimport MainPage from './components/MainPage';\n\nimport './App.css';\nimport './components/textbody.css';\n\nfunction App() {\n  return (\n    <MainPage></MainPage>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}