{"version":3,"sources":["components/Annotation.js","components/AnnotationButton.js","components/MainText.js","components/MainPage.js","App.js","serviceWorker.js","index.js"],"names":["Annotation","this","_groups","id","_id","nodes","start","_start","end","_end","depth","_depth","title","_title","desc","_description","sel","_selection","color","_color","colors","AnnotationButton","props","state","isShowing","isHighlighted","isEditing","handleOnShow","bind","handleOnClose","handleColorChange","handleHover","handleEditMode","handleViewMode","c","setState","annotation","updater","e","document","getElementsByClassName","length","contains","target","stopPropagation","description","getElementById","value","color_buttons","map","onClick","className","key","style","backgroundColor","onMouseOver","background","lineHeight","paddingBottom","children","size","defaultValue","type","React","Component","MainText","ANNOTATIONS","annotation_id","keys","maxDepth","text","textPanes","isShowHelp","handleMouseUp","handleRerender","handleAppend","handleAppendEnter","handleClear","onSetSidebarOpen","handleExample","handleShowHelp","ann","reloadTextPanes","pane_list","i","modified_children","Array","isArray","getSelection","toString","input","getUserInput","selection","styleSelection","empty","window","prompt","containerid","startIndex","getTotalOffset","anchorNode","anchorOffset","endIndex","focusNode","focusOffset","temp","getDepthRange","Math","max","updatedtextPanes","startInd","endInd","String","x","processAnnotation","concat","push","validDepths","previous","d","anchor","escaped","offset","textContent","substring","replace","node","previousSibling","parentNode","new_annotation","prev_annotation","prev_start","prev_end","startHighlight","prev_len","endHighlight","slice","parseInt","prev_children","newPanes","open","sidebarOpen","console","log","textbody","onKeyUp","onMouseUp","sidebarContent","href","fontSize","padding","sidebar","onSetOpen","styles","width","minHeight","a1","a2","a3","a4","MainPage","isExample","App","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.287b18c5.chunk.js","sourcesContent":["export default class Annotation {\r\n\tconstructor() {\r\n\t\tthis._groups = []\r\n\t}\r\n\t//MUTATORS\r\n\tset id(id) {\r\n\t\tthis._id = id;\r\n\t}\r\n\tset groups(nodes) {\r\n\t\tthis._groups = nodes;\r\n\t}\r\n\tset startIndex(start) {\r\n\t\tthis._start = start;\r\n\t}\r\n\tset endIndex(end) {\r\n\t\tthis._end = end;\r\n\t}\r\n\tset depth(depth) {\r\n\t\tthis._depth = depth;\r\n\t}\r\n\tset title(title) {\r\n\t\tthis._title = title;\r\n\t}\r\n\tset description(desc) {\r\n\t\tthis._description = desc;\r\n\t}\r\n\tset selection(sel) {\r\n\t\tthis._selection = sel;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._color = color;\r\n\t}\r\n\t// ACCESSORS\r\n\tget id() {\r\n\t\treturn this._id;\r\n\t}\r\n\tget groups() {\r\n\t\treturn this._groups;\r\n\t}\r\n\tget startIndex() {\r\n\t\treturn this._start;\r\n\t}\r\n\tget endIndex() {\r\n\t\treturn this._end;\r\n\t}\r\n\tget depth() {\r\n\t\treturn this._depth;\r\n\t}\r\n\tget title() {\r\n\t\treturn this._title;\r\n\t}\r\n\tget description() {\r\n\t\treturn this._description;\r\n\t}\r\n\tget selection() {\r\n\t\treturn this._selection;\r\n\t}\r\n\tget color() {\r\n\t\treturn this._color;\r\n\t}\r\n}","import React from 'react';\r\nimport { FaPen } from 'react-icons/fa'\r\n\r\nimport './Annotation.css'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class AnnotationButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t\tisHighlighted: false,\r\n\t\t\tcolor: this.props.color,\r\n\t\t\tisEditing: false\r\n\t\t}\r\n\t\tthis.handleOnShow = this.handleOnShow.bind(this);\r\n\t\tthis.handleOnClose = this.handleOnClose.bind(this);\r\n\t\tthis.handleColorChange = this.handleColorChange.bind(this);\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.handleEditMode = this.handleEditMode.bind(this);\r\n\t\tthis.handleViewMode = this.handleViewMode.bind(this);\r\n\t}\r\n\r\n\thandleHover() {\r\n\t}\r\n\r\n\thandleColorChange(c) {\r\n\t\tthis.setState({color: c});\r\n\t\tthis.props.annotation.color = c;\r\n\t\tthis.props.updater(this.props.annotation, c);\r\n\t}\r\n\r\n\thandleOnShow() {\r\n\t\tif (!this.state.isShowing){\r\n\t\t\tthis.setState({ isShowing: true });\r\n\t\t}\r\n\t}\r\n\r\n\thandleOnClose(e) {\r\n\t\tif (document.getElementsByClassName(\"modal\").length && \r\n\t\t\t!document.getElementsByClassName(\"modal\")[0].contains(e.target)){\r\n\t\t\tthis.setState({ isShowing: false });\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\thandleEditMode() {\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\thandleViewMode() {\r\n\t\tthis.props.annotation.description = document.getElementById(\"updatedDescription\").value;\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\trender() {\r\n\t\t//console.log(\"btn rerender\")\r\n\t\tlet color_buttons = colors.map((c) => <span onClick={ () => this.handleColorChange(c) } \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"color-selector\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={c} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: c}}></span>)\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<span className={ this.state.isHighlighted ? \"annotation-btn\" : \"annotation-btn\"} \r\n\t\t\t\t\tonMouseOver={ this.handleHover }\r\n\t\t\t\t\tonClick={ this.handleOnShow }\r\n\t\t\t\t\tstyle={ {background: `linear-gradient(0deg, ${this.props.annotation.color}, white 1px, transparent 1px)`,\r\n\t\t\t\t\t\t\tlineHeight: \"\"+(20+(this.props.depth-1))+\"px\",\r\n\t\t\t\t\t\t\tpaddingBottom: \"\"+(4*(this.props.depth-1))+\"px\",\r\n\t\t\t\t\t\t\tcolor: this.props.annotation.color} }>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t\t</span>\r\n\t\t\t\t{ \r\n\t\t\t\t\tthis.state.isShowing && \r\n\t\t\t\t\t<div className=\"modal-bg\" onClick={ this.handleOnClose } style={ {color: \"black\"} }>\r\n\t\t\t\t\t\t<div className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-inner\">\r\n\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t{ color_buttons }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t!this.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"modal-desc-text\">\r\n\t\t\t\t\t\t\t\t\t\t{ this.props.annotation.description }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\t\t\t<span className=\"lowOptions\" onClick={ this.handleEditMode } size={5}>\r\n\t\t\t\t\t\t\t\t\t\t<FaPen/>\r\n\t\t\t\t\t\t\t\t\t</span>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<textarea id=\"updatedDescription\" defaultValue={ this.props.annotation.description }></textarea>\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" onClick={ this.handleViewMode }>Update Description</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport Sidebar from 'react-sidebar';\r\nimport { FaBars, FaTrash } from 'react-icons/fa'\r\n\r\nimport Annotation from './Annotation'\r\nimport AnnotationButton from './AnnotationButton'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class MainText extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tANNOTATIONS: [], \r\n\t\t\tannotation_id: 1,\r\n\t\t\tkeys: 1, \r\n\t\t\tmaxDepth: 0,\r\n\t\t\ttext: \"\",\r\n\t\t\ttextPanes: [],\r\n\t\t\tisShowHelp: false\r\n\t\t};\r\n\t\t\r\n\t\tthis.handleMouseUp = this.handleMouseUp.bind(this);\r\n\t\tthis.handleRerender = this.handleRerender.bind(this);\r\n\t\tthis.handleAppend = this.handleAppend.bind(this);\r\n\t\tthis.handleAppendEnter = this.handleAppendEnter.bind(this);\r\n\t\tthis.handleClear = this.handleClear.bind(this);\r\n\r\n\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t\tthis.handleShowHelp = this.handleShowHelp.bind(this);\r\n\t}\r\n\r\n\thandleRerender(ann, color) { // update colors\r\n\t\tthis.reloadTextPanes(this.state.textPanes, ann, color);\r\n\t}\r\n\r\n\treloadTextPanes(pane_list, ann, color) {\r\n\t\tvar recolored_text = []\r\n\t\tfor (var i=0; i<pane_list.length; i++){\r\n\t\t\tif (pane_list[i].props && pane_list[i].props.children) {\r\n\t\t\t\t//reload children\r\n\t\t\t\tvar modified_children = pane_list[i].props.children;\r\n\t\t\t\tif (!Array.isArray(modified_children)){\r\n\t\t\t\t\tmodified_children = [modified_children];\r\n\t\t\t\t}\r\n\t\t\t\tthis.reloadTextPanes(modified_children, ann, color);\r\n\r\n\t\t\t\tpane_list[i] = \r\n\t\t\t\t\t<AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ pane_list[i].key }  \r\n\t\t\t\t\t\tdepth={ pane_list[i].props.depth } \r\n\t\t\t\t\t\tannotation={ pane_list[i].props.annotation } \r\n\t\t\t\t\t\tcolor={ pane_list[i].props.annotation==ann ? color : pane_list[i].props.annotation.color } >\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState(this.state);\r\n\t}\r\n\t\r\n\thandleMouseUp() {\r\n\t\tif (document.getElementsByClassName(\"modal\").length){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.getSelection() && document.getSelection().toString().length>0) {    // all browsers, except IE before version 9\r\n\t\t\tvar sel = document.getSelection();\r\n        \tvar input = this.getUserInput();\r\n        \tvar annotation = new Annotation();\r\n        \tannotation.description = input;\r\n        \tannotation.selection = sel;\r\n        \tthis.styleSelection(sel, annotation, \"textbody\");\r\n        \tsel.empty();\r\n  \t\t}\r\n\t}\r\n\r\n\tgetUserInput() {\r\n\t\treturn window.prompt(\"What is this annotation for?\",\"\");\r\n\t}\r\n\t\r\n\tstyleSelection(sel, annotation, containerid) {\r\n\t\tannotation.id = this.state.annotation_id;\r\n\t\tannotation.startIndex = this.getTotalOffset(sel.anchorNode, sel.anchorOffset, containerid);\r\n\t\tannotation.endIndex = this.getTotalOffset(sel.focusNode, sel.focusOffset, containerid);\r\n\t\t\r\n\t\tif (annotation.startIndex > annotation.endIndex) {\r\n\t\t\tvar temp = annotation.startIndex;\r\n\t\t\tannotation.startIndex = annotation.endIndex;\r\n\t\t\tannotation.endIndex = temp;\r\n\t\t}\r\n\r\n\t\tvar depth = this.getDepthRange(annotation);\r\n\t\tannotation.depth = depth;\r\n\t\tthis.setState({ maxDepth: Math.max(this.state.maxDepth, depth) });\r\n\t\r\n\t\t//no modification necessary\r\n\t\tvar updatedtextPanes = []\r\n\t\tvar startInd = 0;\r\n\t\tvar endInd = this.state.text.length;\r\n\t\tfor (var i=0; i<this.state.textPanes.length; i++){\r\n\t\t\tif (typeof this.state.textPanes[i] == 'string' || this.state.textPanes[i] instanceof String) {\r\n\t\t\t\tendInd = startInd + this.state.textPanes[i].length;\r\n\t\t\t}\r\n\t\t\telse if (this.state.textPanes[i].type=='br') {\r\n\t\t\t\tendInd = startInd; //while it is treated as \\n in text, it doesn't count as a valid reduction of length\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendInd = this.state.textPanes[i].props.annotation.endIndex;\r\n\t\t\t}\r\n\t\t\tvar x = this.processAnnotation(annotation, this.state.textPanes[i], startInd, endInd);\r\n\t\t\tupdatedtextPanes=updatedtextPanes.concat(x);\r\n\t\t\tstartInd = endInd;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({textPanes: updatedtextPanes});\r\n\t\tthis.setState({annotation_id: this.state.annotation_id+1});\r\n\t\tthis.state.ANNOTATIONS.push(annotation);\r\n\t}\r\n\r\n\tgetDepthRange(annotation) {\r\n\t\tvar validDepths = [];\r\n\t\tfor (var i=0; i<this.state.maxDepth+1; i++){\r\n\t\t\tvalidDepths.push(i+1);\r\n\t\t}\t\r\n\t\tfor (var previous of this.state.ANNOTATIONS) {\r\n\t\t\tif (previous.startIndex < annotation.endIndex && annotation.startIndex < previous.endIndex) {\r\n\t\t\t\tvalidDepths[previous.depth - 1] = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var d of validDepths){\r\n\t\t\tif (d>0) {\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t}\t\r\n\t\treturn this.state.maxDepth+1;\r\n\t}\r\n\r\n\tgetTotalOffset(anchor, anchorOffset, containerid) {\r\n\t\tvar escaped = /(\\t|\\n|\\r)+/;\r\n\t\tvar offset = anchorOffset - (anchor.textContent.substring(0,anchorOffset).length - anchor.textContent.substring(0,anchorOffset).replace(escaped,'').length);\r\n\t\tvar node = anchor;\r\n\t\twhile (node !== document.getElementById(containerid)) {\r\n\t\t\tif (node.previousSibling !== null) {\r\n\t\t\t\tnode = node.previousSibling;\r\n\t\t\t\toffset += node.textContent.replace(escaped,'').length;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset;\r\n\t}\r\n\r\n\tprocessAnnotation(new_annotation, prev_annotation, prev_start, prev_end){\r\n\t\t//intersects\r\n\t\tif (new_annotation.startIndex < prev_end && prev_start < new_annotation.endIndex) {\r\n\r\n\t\t\t//Base case - String\r\n\t\t\t\r\n\t\t\tif (typeof prev_annotation == 'string' || prev_annotation instanceof String){\t\t\t\t\r\n\t\t\t\tvar startHighlight = new_annotation.startIndex > prev_start ? new_annotation.startIndex - prev_start : 0;\r\n\t\t\t\tvar prev_len = prev_end - prev_start;\r\n\t\t\t\tvar endHighlight = new_annotation.endIndex > prev_end ? prev_len : prev_len - (prev_end - new_annotation.endIndex);\r\n\t\t\t\t\r\n\t\t\t\tnew_annotation.color = colors[0];\r\n\r\n\t\t\t\treturn [prev_annotation.slice(0,startHighlight),\r\n\t\t\t\t\t\t<AnnotationButton \r\n\t\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) }  \r\n\t\t\t\t\t\t\tdepth={ new_annotation.depth } \r\n\t\t\t\t\t\t\tannotation={ new_annotation } \r\n\t\t\t\t\t\t\tcolor={ new_annotation.color } >\r\n\t\t\t\t\t\t\t{prev_annotation.slice(startHighlight,endHighlight)}\r\n\t\t\t\t\t\t</AnnotationButton>, \r\n\t\t\t\t\t\tprev_annotation.slice(endHighlight)]\r\n\t\t\t}\r\n\t\t\telse if (prev_annotation.type=='br') {\r\n\t\t\t\treturn [<br key={ prev_annotation.key }></br>]\r\n\t\t\t}\r\n\r\n\t\t\t//Recurse\r\n\t\t\tvar prev_children = prev_annotation.props.children;\r\n\t\t\tif (!Array.isArray(prev_children)){\r\n\t\t\t\tprev_children = [prev_children];\r\n\t\t\t}\r\n\t\t\tvar modified_children = [];\r\n\t\t\tfor (var i=0; i<prev_children.length; i++){\r\n\t\t\t\tprev_end = (typeof prev_children[i] == 'string' || prev_children[i] instanceof String) ? \r\n\t\t\t\t\tprev_start + prev_children[i].length : prev_children[i].props.annotation.endIndex;\r\n\t\t\t\t\r\n\t\t\t\tmodified_children = modified_children.concat(this.processAnnotation(new_annotation, prev_children[i], prev_start, prev_end));\r\n\t\t\t\t\r\n\t\t\t\tprev_start = prev_end;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn [<AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) } \r\n\t\t\t\t\t\tdepth={ prev_annotation.props.depth } \r\n\t\t\t\t\t\tannotation={ prev_annotation.props.annotation }\r\n\t\t\t\t\t\tcolor={ prev_annotation.props.annotation.color }>\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>];\r\n\t\t}\t\r\n\t\telse {\r\n\t\t\treturn prev_annotation;\r\n\t\t}\r\n\t}\r\n\r\n\thandleAppend() {\r\n\t\tvar newPanes = this.state.textPanes;\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"append-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({ textPanes : newPanes, text : this.state.text + \"\\n\" + document.getElementById(\"append-text\").value})\r\n\t\tdocument.getElementById(\"append-text\").value = \"\";\r\n\t}\r\n\r\n\thandleAppendEnter(e) {\r\n\t\tif (e.key == \"Enter\") {\r\n\t\t\tthis.handleAppend();\r\n\t\t}\r\n\t}\r\n\r\n\thandleClear() {\r\n\t\tthis.setState({\r\n\t\t\t\tANNOTATIONS: [], \r\n\t\t\t\tannotation_id: 1,\r\n\t\t\t\tkeys: 1, \r\n\t\t\t\tmaxDepth: 0,\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\ttextPanes: []\r\n\t\t\t});\r\n\t}\r\n\t\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconsole.log(this.state.ANNOTATIONS);\r\n\t\tconsole.log(this.state.textPanes);\r\n\t\tvar textbody = (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"nav-append\">\r\n\t\t\t\t\t<input type=\"text\" id=\"append-text\" onKeyUp={ this.handleAppendEnter }></input> \r\n\t\t\t\t\t<button onClick={this.handleAppend} type=\"button\">Append</button>\r\n\t\t\t\t\t<button onClick={this.handleClear} type=\"button\"><FaTrash/></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id=\"textbody\" onMouseUp={this.handleMouseUp}>\r\n\t\t\t\t\t{ this.state.textPanes } \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tvar sidebarContent = \r\n\t\t\t<div className=\"sideNav\">\r\n\t\t\t\t<a className=\"menuItem\" href=\"#\" onClick={ this.handleExample }> Example </a>\r\n\t\t\t\t<a className=\"menuItem\" href=\"#\" onClick={ this.handleShowHelp }> Help </a>\r\n\t\t\t\t{ this.state.isShowHelp &&\r\n\t\t\t\t<div style={{fontSize: \"0.75em\", padding: \"0 0.25em\"}}>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Highlight</b> a part of the text to add an annotation.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Click</b> an annotation to view it or modify it.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tUse the top <b>Append</b> bar to add another line to the main text body.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tClick on the <b>trash can</b> to clear the body of text.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"10em\"} }}>\r\n     \t\t\t\t\r\n     \t\t\t\t<div className=\"menuBar\">\t\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\t\t    \t\t{ textbody }\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tvar a1 = new Annotation();\r\n\t\ta1.id = 1;\r\n\t\ta1.color = colors[1];\r\n\t\ta1.depth = 1;\r\n\t\ta1.startIndex = 19;\r\n\t\ta1.endIndex = 27;\r\n\t\ta1.description = \"cambiar - verb\\nto change\";\r\n\t\tvar a2 = new Annotation();\r\n\t\ta2.id = 2;\r\n\t\ta2.color = colors[0];\r\n\t\ta2.depth = 1;\r\n\t\ta2.startIndex = 19;\r\n\t\ta2.endIndex = 27;\r\n\t\ta2.description = \"emos/amos indicates that the pronoun is \\\"us\\\"\";\r\n\t\tvar a3 = new Annotation();\r\n\t\ta3.id = 3;\r\n\t\ta3.color = colors[1];\r\n\t\ta3.depth = 1;\r\n\t\ta3.startIndex = 42;\r\n\t\ta3.endIndex = 46;\r\n\t\ta3.description = \"cambiar\";\r\n\t\tvar a4 = new Annotation();\r\n\t\ta4.id = 4;\r\n\t\ta4.color = colors[3];\r\n\t\ta4.depth = 1;\r\n\t\ta4.startIndex = 146;\r\n\t\ta4.endIndex = 162;\r\n\t\ta4.description = \"Guatemalan activist and Nobel Peace prize winner\";\r\n\r\n\t\tthis.setState({\r\n\t\t\tANNOTATIONS: [a1, a2, a3, a4], \r\n\t\t\tannotation_id: 5,\r\n\t\t\tkeys: 2,\r\n\t\t\tmaxDepth: 1,\r\n\t\t\ttext: \"Este mundo no va a cambiar a menos que estemos dispuestos a cambiar nosotros mismos\\nThe world won't change unless we're willing to change ourselves\\nRigoberta Menchu\",\r\n\t\t\ttextPanes: \r\n\t\t\t\t[\"Este mundo no va a \", \r\n\t\t\t\t<AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a1.id + a1.startIndex + a1.endIndex) } \r\n\t\t\t\t\t\tdepth={ a1.depth } \r\n\t\t\t\t\t\tannotation={ a1 }\r\n\t\t\t\t\t\tcolor={ a1.color }>\r\n\t\t\t\t\t\tcambiar\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" a menos que est\",\r\n\t\t\t\t<AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a2.id + a2.startIndex + a2.endIndex) } \r\n\t\t\t\t\t\tdepth={ a2.depth } \r\n\t\t\t\t\t\tannotation={ a2 }\r\n\t\t\t\t\t\tcolor={ a2.color }>\r\n\t\t\t\t\t\temos\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" dispuestos a cambiar nosotros mismos\",\r\n\t\t\t\t<br></br>,\r\n\t\t\t\t\"The world won't \",\r\n\t\t\t\t<AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a3.id + a3.startIndex + a3.endIndex) } \r\n\t\t\t\t\t\tdepth={ a3.depth } \r\n\t\t\t\t\t\tannotation={ a3 }\r\n\t\t\t\t\t\tcolor={ a3.color }>\r\n\t\t\t\t\t\tchange\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \" unless we're willing to change ourselves\",\r\n\t\t\t\t <br></br>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <AnnotationButton \r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a4.id + a4.startIndex + a4.endIndex) } \r\n\t\t\t\t\t\tdepth={ a4.depth } \r\n\t\t\t\t\t\tannotation={ a4 }\r\n\t\t\t\t\t\tcolor={ a4.color }>\r\n\t\t\t\t\t\tRigoberta Menchu\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <br></br>]\r\n\t\t});\r\n\t}\r\n\r\n\thandleShowHelp() {\r\n\t\tthis.setState({ isShowHelp: !this.state.isShowHelp });\r\n\t}\r\n}","import React from 'react';\r\nimport Sidebar from 'react-sidebar';\r\nimport { FaBars } from 'react-icons/fa'\r\n\r\nimport MainText from './MainText';\r\nimport Annotation from './Annotation'\r\nimport AnnotationButton from './AnnotationButton'\r\n\r\nexport default class MainPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tisExample: true,\r\n\t\t\tsidebarOpen: false\r\n\t\t};\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t}\r\n\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tthis.setState({ isExample: true });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconsole.log(\"rerender main page\")\r\n\t\tconsole.log(this.state.isExample)\r\n\t\tvar sidebarContent = \r\n\t\t\t<div className=\"sideNav\">\r\n\t\t\t\t<a className=\"menuItem\" href=\"#\" onClick={ this.handleExample }> Example </a>\r\n\t\t\t\t<a className=\"menuItem\" href=\"#\" onClick={ this.handleExample }> Load Text </a>\r\n\t\t\t\t<a className=\"menuItem\" href=\"#\" onClick={ this.handleExample }> Help </a>\r\n\t\t\t</div>\r\n\t\treturn <MainText></MainText>;\r\n\t\t/*\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"10em\"} }}>\r\n     \t\t\t\t\r\n     \t\t\t\t<div className=\"menuBar\">\t\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\r\n\t\t    \t\t<MainText runExample={ this.state.isExample }></MainText>\r\n\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t    */\r\n\t}\r\n}","import React from 'react';\n//import logo from './logo.svg';\n\nimport MainPage from './components/MainPage';\n\nimport './App.css';\nimport './components/textbody.css';\n\nfunction App() {\n  return (\n    <MainPage></MainPage>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}