{"version":3,"sources":["components/Annotation.js","components/AnnotationButton.js","components/MainText.js","components/MainPage.js","App.js","serviceWorker.js","index.js"],"names":["Annotation","this","_groups","id","_id","nodes","start","_start","end","_end","depth","_depth","title","_title","desc","_description","sel","_selection","color","_color","colors","AnnotationButton","props","state","isShowing","isHighlighted","isEditing","handleDeleter","bind","handleOnShow","handleOnClose","handleColorChange","handleHover","handleEditMode","handleViewMode","handleViewModeReset","deleter","c","setState","annotation","updater","e","document","getElementsByClassName","length","contains","target","stopPropagation","description","getElementById","value","color_buttons","map","onClick","className","key","style","backgroundColor","onMouseOver","background","lineHeight","paddingBottom","children","size","defaultValue","class","type","React","Component","MainText","ANNOTATIONS","annotation_id","maxDepth","text","textPanes","isShowHelp","isShowImport","isShowImportAnnotations","isShowExportAnnotations","handleMouseUp","handleRerender","handleAppend","handleAppendEnter","handleClear","handleDeleteAnnotation","onSetSidebarOpen","handleExample","handleShowImport","handleImportAppend","handleImportReplace","handleShowHelp","handleShowExportAnnotations","handleShowImportAnnotations","handleImportAnnotations","ann","reloadTextPanes","index","i","splice","apply","concat","pane_list","modified_children","Array","isArray","getSelection","toString","input","getUserInput","selection","styleSelection","empty","window","prompt","containerid","startIndex","getTotalOffset","anchorNode","anchorOffset","endIndex","focusNode","focusOffset","temp","getDepthRange","Math","max","updatedtextPanes","startInd","endInd","String","x","processAnnotation","push","validDepths","previous","d","anchor","escaped","offset","textContent","substring","replace","node","previousSibling","parentNode","new_annotation","prev_annotation","prev_start","prev_end","startHighlight","prev_len","endHighlight","slice","parseInt","prev_children","newPanes","keys","open","sidebarOpen","textbody","onKeyUp","onMouseUp","sidebarContent","width","fontSize","height","placeholder","readOnly","JSON","stringify","padding","sidebar","onSetOpen","styles","minHeight","a1","a2","a3","a4","annotations","parse","regenerateAnnotations","regenerateTextPanes","regenerated","_startIndex","_endIndex","ann_refs","MainPage","isExample","App","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.7bcdcb1d.chunk.js","sourcesContent":["export default class Annotation {\r\n\tconstructor() {\r\n\t\tthis._groups = []\r\n\t}\r\n\t//MUTATORS\r\n\tset id(id) {\r\n\t\tthis._id = id;\r\n\t}\r\n\tset groups(nodes) {\r\n\t\tthis._groups = nodes;\r\n\t}\r\n\tset startIndex(start) {\r\n\t\tthis._start = start;\r\n\t}\r\n\tset endIndex(end) {\r\n\t\tthis._end = end;\r\n\t}\r\n\tset depth(depth) {\r\n\t\tthis._depth = depth;\r\n\t}\r\n\tset title(title) {\r\n\t\tthis._title = title;\r\n\t}\r\n\tset description(desc) {\r\n\t\tthis._description = desc;\r\n\t}\r\n\tset selection(sel) {\r\n\t\tthis._selection = sel;\r\n\t}\r\n\tset color(color) {\r\n\t\tthis._color = color;\r\n\t}\r\n\t// ACCESSORS\r\n\tget id() {\r\n\t\treturn this._id;\r\n\t}\r\n\tget groups() {\r\n\t\treturn this._groups;\r\n\t}\r\n\tget startIndex() {\r\n\t\treturn this._start;\r\n\t}\r\n\tget endIndex() {\r\n\t\treturn this._end;\r\n\t}\r\n\tget depth() {\r\n\t\treturn this._depth;\r\n\t}\r\n\tget title() {\r\n\t\treturn this._title;\r\n\t}\r\n\tget description() {\r\n\t\treturn this._description;\r\n\t}\r\n\tget selection() {\r\n\t\treturn this._selection;\r\n\t}\r\n\tget color() {\r\n\t\treturn this._color;\r\n\t}\r\n}","import React from 'react';\r\nimport { FaPen, FaTrash } from 'react-icons/fa'\r\n\r\nimport './Annotation.css'\r\nimport './TextBody.css'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class AnnotationButton extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tisShowing: false,\r\n\t\t\tisHighlighted: false,\r\n\t\t\tcolor: this.props.color,\r\n\t\t\tisEditing: false\r\n\t\t}\r\n\t\tthis.handleDeleter = this.handleDeleter.bind(this);\r\n\t\tthis.handleOnShow = this.handleOnShow.bind(this);\r\n\t\tthis.handleOnClose = this.handleOnClose.bind(this);\r\n\t\tthis.handleColorChange = this.handleColorChange.bind(this);\r\n\t\tthis.handleHover = this.handleHover.bind(this);\r\n\t\tthis.handleEditMode = this.handleEditMode.bind(this);\r\n\t\tthis.handleViewMode = this.handleViewMode.bind(this);\r\n\t\tthis.handleViewModeReset = this.handleViewModeReset.bind(this);\r\n\t}\r\n\r\n\thandleHover() {\r\n\t}\r\n\r\n\thandleDeleter() {\r\n\t\tthis.props.deleter(this)\r\n\t}\r\n\r\n\thandleColorChange(c) {\r\n\t\tthis.setState({color: c});\r\n\t\tthis.props.annotation.color = c;\r\n\t\tthis.props.updater(this.props.annotation, c);\r\n\t}\r\n\r\n\thandleOnShow() {\r\n\t\tif (!this.state.isShowing){\r\n\t\t\tthis.setState({ isShowing: true });\r\n\t\t}\r\n\t}\r\n\r\n\thandleOnClose(e) {\r\n\t\tif (document.getElementsByClassName(\"modal\").length && \r\n\t\t\t!document.getElementsByClassName(\"modal\")[0].contains(e.target)){\r\n\t\t\tthis.setState({ isShowing: false });\r\n\t\t}\r\n\t\te.stopPropagation();\r\n\t}\r\n\r\n\thandleEditMode() {\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\thandleViewMode() {\r\n\t\tthis.props.annotation.description = document.getElementById(\"updatedDescription\").value;\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\thandleViewModeReset() {\r\n\t\tdocument.getElementById(\"updatedDescription\").value = this.props.annotation.description;\r\n\t\tthis.setState({ isEditing : !this.state.isEditing });\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet color_buttons = colors.map((c) => <span onClick={ () => this.handleColorChange(c) } \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"color-selector\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={c} \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{backgroundColor: c}}></span>)\r\n\t\treturn (\r\n\t\t\t<span>\r\n\t\t\t\t<span className={ this.state.isHighlighted ? \"annotation-btn\" : \"annotation-btn\"} \r\n\t\t\t\t\tonMouseOver={ this.handleHover }\r\n\t\t\t\t\tonClick={ this.handleOnShow }\r\n\t\t\t\t\tstyle={ {background: `linear-gradient(0deg, ${this.props.annotation.color}, white 1px, transparent 1px)`,\r\n\t\t\t\t\t\t\tlineHeight: `${20+(this.props.depth-1)}px`,\r\n\t\t\t\t\t\t\tpaddingBottom: `${4*(this.props.depth-1)}px`,\r\n\t\t\t\t\t\t\tcolor: this.props.annotation.color} }>\r\n\t\t\t\t{ this.props.children }\r\n\t\t\t\t</span>\r\n\t\t\t\t{ \r\n\t\t\t\t\tthis.state.isShowing && \r\n\t\t\t\t\t<div className=\"modal-bg\" onClick={ this.handleOnClose } style={ {color: \"black\"} }>\r\n\t\t\t\t\t\t<div className=\"modal\">\r\n\t\t\t\t\t\t<div className=\"modal-inner\">\r\n\t\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t\t{ color_buttons }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr></hr>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t!this.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"modal-desc-text\">\r\n\t\t\t\t\t\t\t\t\t\t{ this.props.annotation.description }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<br></br>\r\n\t\t\t\t\t\t\t\t\t<div className=\"optionsBar\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"lowOptions\" onClick={ this.handleEditMode } size={5}>\r\n\t\t\t\t\t\t\t\t\t\t<FaPen/>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"lowOptions\" onClick={ this.handleDeleter } size={5}>\r\n\t\t\t\t\t\t\t\t\t\t<FaTrash/>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\t\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.isEditing &&\r\n\t\t\t\t\t\t\t\t<div className=\"modal-desc\">\r\n\t\t\t\t\t\t\t\t\t<textarea id=\"updatedDescription\" defaultValue={ this.props.annotation.description }></textarea>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<button class=\"modal-submit\" type=\"button\" onClick={ this.handleViewMode }>Update Description</button>\r\n\t\t\t\t\t\t\t\t\t<button class=\"modal-reset\" type=\"button\" onClick={ this.handleViewModeReset }>Cancel</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</span>\r\n\t\t);\r\n\t}\r\n}","import React from 'react';\r\nimport Sidebar from 'react-sidebar';\r\nimport { FaBars, FaTrash, FaChevronCircleDown, FaChevronCircleUp } from 'react-icons/fa'\r\n\r\nimport Annotation from './Annotation'\r\nimport AnnotationButton from './AnnotationButton'\r\n\r\nconst colors = [\r\n\t\"#e88\", //red\r\n\t\"#ec5\", //orange\r\n\t\"#7a5\", //green\r\n\t\"#48f\", //blue\r\n\t\"#99e\", //violet\r\n\t\"#e9d\" //pink\r\n]\r\n\r\nexport default class MainText extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tANNOTATIONS: [],\r\n\t\t\tannotation_id: 1,\r\n\t\t\tmaxDepth: 0,\r\n\t\t\ttext: \"\",\r\n\t\t\ttextPanes: [],\r\n\t\t\tisShowHelp: true,\r\n\t\t\tisShowImport: false, \r\n\t\t\tisShowImportAnnotations: false,\r\n\t\t\tisShowExportAnnotations: false\r\n\t\t};\r\n\r\n\t\tthis.handleMouseUp = this.handleMouseUp.bind(this);\r\n\t\tthis.handleRerender = this.handleRerender.bind(this);\r\n\t\tthis.handleAppend = this.handleAppend.bind(this);\r\n\t\tthis.handleAppendEnter = this.handleAppendEnter.bind(this);\r\n\t\tthis.handleClear = this.handleClear.bind(this);\r\n\t\tthis.handleDeleteAnnotation = this.handleDeleteAnnotation.bind(this);\r\n\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t\tthis.handleShowImport = this.handleShowImport.bind(this);\r\n\t\tthis.handleImportAppend = this.handleImportAppend.bind(this);\r\n\t\tthis.handleImportReplace = this.handleImportReplace.bind(this);\r\n\t\tthis.handleShowHelp = this.handleShowHelp.bind(this);\r\n\t\r\n\t\tthis.handleShowExportAnnotations = this.handleShowExportAnnotations.bind(this);\r\n\t\tthis.handleShowImportAnnotations = this.handleShowImportAnnotations.bind(this);\r\n\t\tthis.handleImportAnnotations = this.handleImportAnnotations.bind(this);\r\n\t}\r\n\r\n\thandleRerender(ann, color) { // update colors\r\n\t\tthis.reloadTextPanes(this.state.textPanes, ann, color);\r\n\t}\r\n\r\n\thandleDeleteAnnotation(ann) {\r\n\t\tvar index = -1;\r\n\t\tfor (var i = 0; i < this.state.textPanes.length; i++){\r\n\t\t\tif (this.state.textPanes[i].props && this.state.textPanes[i].props.annotation === ann.props.annotation) {\r\n\t\t\t\tindex = i;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (index > -1) {\r\n\t\t\tthis.state.textPanes.splice.apply(this.state.textPanes, [index, 1].concat(ann.props.children));\r\n\t\t\tthis.setState(this.state)\r\n\t\t}\r\n\t}\r\n\r\n\treloadTextPanes(pane_list, ann, color) {\r\n\t\tfor (var i=0; i<pane_list.length; i++){\r\n\t\t\tif (pane_list[i].props && pane_list[i].props.children) {\r\n\t\t\t\t//reload children\r\n\t\t\t\tvar modified_children = pane_list[i].props.children;\r\n\t\t\t\tif (!Array.isArray(modified_children)){\r\n\t\t\t\t\tmodified_children = [modified_children];\r\n\t\t\t\t}\r\n\t\t\t\tthis.reloadTextPanes(modified_children, ann, color);\r\n\r\n\t\t\t\tpane_list[i] =\r\n\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ pane_list[i].key }\r\n\t\t\t\t\t\tdepth={ pane_list[i].props.depth }\r\n\t\t\t\t\t\tannotation={ pane_list[i].props.annotation }\r\n\t\t\t\t\t\tcolor={ pane_list[i].props.annotation===ann ? color : pane_list[i].props.annotation.color } >\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setState(this.state);\r\n\t}\r\n\r\n\thandleMouseUp(e) {\r\n\t\tif (document.getElementsByClassName(\"modal\").length){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (document.getSelection() && document.getSelection().toString().length>0) {    // all browsers, except IE before version 9\r\n\t\t\tvar sel = document.getSelection();\r\n        \tvar input = this.getUserInput();\r\n        \tif (!input){\r\n        \t\treturn\r\n        \t}\r\n        \tvar annotation = new Annotation();\r\n        \tannotation.description = input;\r\n        \tannotation.selection = sel;\r\n        \tthis.styleSelection(sel, annotation, \"textbody\");\r\n        \tsel.empty();\r\n  \t\t}\r\n\t}\r\n\r\n\tgetUserInput() {\r\n\t\treturn window.prompt(\"What is this annotation for?\",\"\");\r\n\t}\r\n\r\n\tstyleSelection(sel, annotation, containerid) {\r\n\t\tannotation.id = this.state.annotation_id;\r\n\t\tannotation.startIndex = this.getTotalOffset(sel.anchorNode, sel.anchorOffset, containerid);\r\n\t\tannotation.endIndex = this.getTotalOffset(sel.focusNode, sel.focusOffset, containerid);\r\n\r\n\t\tif (annotation.startIndex > annotation.endIndex) {\r\n\t\t\tvar temp = annotation.startIndex;\r\n\t\t\tannotation.startIndex = annotation.endIndex;\r\n\t\t\tannotation.endIndex = temp;\r\n\t\t}\r\n\r\n\t\tvar depth = this.getDepthRange(annotation);\r\n\t\tannotation.depth = depth;\r\n\t\tthis.setState({ maxDepth: Math.max(this.state.maxDepth, depth) });\r\n\r\n\t\t//no modification necessary\r\n\t\tvar updatedtextPanes = []\r\n\t\tvar startInd = 0;\r\n\t\tvar endInd = this.state.text.length;\r\n\t\tfor (var i=0; i<this.state.textPanes.length; i++){\r\n\t\t\tif (typeof this.state.textPanes[i] === 'string' || this.state.textPanes[i] instanceof String) {\r\n\t\t\t\tendInd = startInd + this.state.textPanes[i].length;\r\n\t\t\t}\r\n\t\t\telse if (this.state.textPanes[i].type==='br') {\r\n\t\t\t\tendInd = startInd; //while it is treated as \\n in text, it doesn't count as a valid reduction of length\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tendInd = this.state.textPanes[i].props.annotation.endIndex;\r\n\t\t\t}\r\n\t\t\tvar x = this.processAnnotation(annotation, this.state.textPanes[i], startInd, endInd);\r\n\t\t\tupdatedtextPanes=updatedtextPanes.concat(x);\r\n\t\t\tstartInd = endInd;\r\n\t\t}\r\n\r\n\t\tthis.setState({textPanes: updatedtextPanes});\r\n\t\tthis.setState({annotation_id: this.state.annotation_id+1});\r\n\t\tthis.state.ANNOTATIONS.push(annotation);\r\n\t}\r\n\r\n\tgetDepthRange(annotation) {\r\n\t\tvar validDepths = [];\r\n\t\tfor (var i=0; i<this.state.maxDepth+1; i++){\r\n\t\t\tvalidDepths.push(i+1);\r\n\t\t}\r\n\t\tfor (var previous of this.state.ANNOTATIONS) {\r\n\t\t\tif (previous.startIndex < annotation.endIndex && annotation.startIndex < previous.endIndex) {\r\n\t\t\t\tvalidDepths[previous.depth - 1] = -1;\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var d of validDepths){\r\n\t\t\tif (d>0) {\r\n\t\t\t\treturn d;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this.state.maxDepth+1;\r\n\t}\r\n\r\n\tgetTotalOffset(anchor, anchorOffset, containerid) {\r\n\t\tvar escaped = /(\\t|\\r)+/;\r\n\t\tvar offset = anchorOffset - (anchor.textContent.substring(0,anchorOffset).length - anchor.textContent.substring(0,anchorOffset).replace(escaped,'').length);\r\n\t\tvar node = anchor;\r\n\t\twhile (node !== document.getElementById(containerid)) {\r\n\t\t\tif (node.previousSibling !== null) {\r\n\t\t\t\tnode = node.previousSibling;\r\n\t\t\t\toffset += node.textContent.replace(escaped,'').length;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode = node.parentNode;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset;\r\n\t}\r\n\r\n\tprocessAnnotation(new_annotation, prev_annotation, prev_start, prev_end){\r\n\t\t//intersects\r\n\t\tif (new_annotation.startIndex < prev_end && prev_start < new_annotation.endIndex) {\r\n\r\n\t\t\t//Base case - String\r\n\r\n\t\t\tif (typeof prev_annotation === 'string' || prev_annotation instanceof String){\r\n\t\t\t\tvar startHighlight = new_annotation.startIndex > prev_start ? new_annotation.startIndex - prev_start : 0;\r\n\t\t\t\tvar prev_len = prev_end - prev_start;\r\n\t\t\t\tvar endHighlight = new_annotation.endIndex > prev_end ? prev_len : prev_len - (prev_end - new_annotation.endIndex);\r\n\r\n\t\t\t\tnew_annotation.color = colors[0];\r\n\r\n\t\t\t\treturn [prev_annotation.slice(0,startHighlight),\r\n\t\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) }\r\n\t\t\t\t\t\t\tdepth={ new_annotation.depth }\r\n\t\t\t\t\t\t\tannotation={ new_annotation }\r\n\t\t\t\t\t\t\tcolor={ new_annotation.color } >\r\n\t\t\t\t\t\t\t{prev_annotation.slice(startHighlight,endHighlight)}\r\n\t\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\t\tprev_annotation.slice(endHighlight)]\r\n\t\t\t}\r\n\t\t\telse if (prev_annotation.type==='br') {\r\n\t\t\t\treturn [<br key={ prev_annotation.key }></br>]\r\n\t\t\t}\r\n\r\n\t\t\t//Recurse\r\n\t\t\tvar prev_children = prev_annotation.props.children;\r\n\t\t\tif (!Array.isArray(prev_children)){\r\n\t\t\t\tprev_children = [prev_children];\r\n\t\t\t}\r\n\t\t\tvar modified_children = [];\r\n\t\t\tfor (var i=0; i<prev_children.length; i++){\r\n\t\t\t\tprev_end = (typeof prev_children[i] === 'string' || prev_children[i] instanceof String) ?\r\n\t\t\t\t\tprev_start + prev_children[i].length : prev_children[i].props.annotation.endIndex;\r\n\r\n\t\t\t\tmodified_children = modified_children.concat(this.processAnnotation(new_annotation, prev_children[i], prev_start, prev_end));\r\n\r\n\t\t\t\tprev_start = prev_end;\r\n\t\t\t}\r\n\r\n\t\t\treturn [<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + new_annotation.id + prev_start + prev_end) }\r\n\t\t\t\t\t\tdepth={ prev_annotation.props.depth }\r\n\t\t\t\t\t\tannotation={ prev_annotation.props.annotation }\r\n\t\t\t\t\t\tcolor={ prev_annotation.props.annotation.color }>\r\n\t\t\t\t\t\t{ modified_children }\r\n\t\t\t\t\t</AnnotationButton>];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn prev_annotation;\r\n\t\t}\r\n\t}\r\n\r\n\thandleAppend() {\r\n\t\tvar newPanes = this.state.textPanes;\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"append-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({ textPanes : newPanes, text : this.state.text + \"\\n\" + document.getElementById(\"append-text\").value})\r\n\t\tdocument.getElementById(\"append-text\").value = \"\";\r\n\t}\r\n\r\n\thandleAppendEnter(e) {\r\n\t\tif (e.key === \"Enter\") {\r\n\t\t\tthis.handleAppend();\r\n\t\t}\r\n\t}\r\n\r\n\thandleImportReplace() {\r\n\t\tvar newPanes = [];\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"import-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({\r\n\t\t\tANNOTATIONS: [],\r\n\t\t\tannotation_id: 1,\r\n\t\t\tmaxDepth: 0,\r\n\t\t\ttext: \"\",\r\n\t\t\ttextPanes: newPanes\r\n\t\t});\r\n\t\tdocument.getElementById(\"import-text\").value = \"\";\r\n\t}\r\n\t\r\n\thandleImportAppend() {\r\n\t\tvar newPanes = this.state.textPanes;\r\n\t\tnewPanes.push(\"\" + document.getElementById(\"import-text\").value);\r\n\t\tnewPanes.push(<br key={ parseInt(\"\" + -1 + this.state.text.length + this.state.text.length) }></br>);\r\n\t\tthis.setState({ textPanes : newPanes, text : this.state.text + \"\\n\" + document.getElementById(\"import-text\").value})\r\n\t\tdocument.getElementById(\"import-text\").value = \"\";\r\n\t}\r\n\r\n\thandleClear() {\r\n\t\tthis.setState({\r\n\t\t\t\tANNOTATIONS: [],\r\n\t\t\t\tannotation_id: 1,\r\n\t\t\t\tkeys: 1,\r\n\t\t\t\tmaxDepth: 0,\r\n\t\t\t\ttext: \"\",\r\n\t\t\t\ttextPanes: []\r\n\t\t\t});\r\n\t}\r\n\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\r\n\trender() {\r\n\t\tvar textbody = (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"nav-append\">\r\n\t\t\t\t\t<input type=\"text\" id=\"append-text\" onKeyUp={ this.handleAppendEnter }></input>\r\n\t\t\t\t\t<button onClick={this.handleAppend} type=\"button\">Append</button>\r\n\t\t\t\t\t<button onClick={this.handleClear} type=\"button\"><FaTrash/></button>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t<div id=\"textbody\" onMouseUp={this.handleMouseUp}>\r\n\t\t\t\t\t{ this.state.textPanes }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t\tvar sidebarContent =\r\n\t\t\t<div className=\"sideNav\">\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleExample }> Example </p>\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowImport }> Import Plaintext { this.state.isShowImport ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.state.isShowImport &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"import-text\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} } placeholder=\"Enter text to input.\">\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button style={ {width:\"50%\", fontSize: \"0.75em\"} } onClick={this.handleImportReplace} type=\"button\">Replace</button>\r\n\t\t\t\t\t\t<button style={ {width:\"50%\", fontSize: \"0.75em\"} } onClick={this.handleImportAppend} type=\"button\">Append</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowExportAnnotations }> Export Annotations { this.state.isShowExportAnnotations ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{\r\n\t\t\t\t\t this.state.isShowExportAnnotations &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"export-annotations\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} } readOnly value={ JSON.stringify(this.state) }>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowImportAnnotations }> Import Annotations { this.state.isShowImportAnnotations ? <FaChevronCircleUp/> : <FaChevronCircleDown/> } </p>\r\n\t\t\t\t{\r\n\t\t\t\t\t this.state.isShowImportAnnotations &&\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<textarea id=\"import-annotations\" style={ {width:\"100%\", fontSize: \"0.75em\", height:\"12em\"} }>\r\n\t\t\t\t\t\t</textarea>\r\n\t\t\t\t\t\t<button style={ {width:\"100%\", fontSize: \"0.75em\"} } onClick={this.handleImportAnnotations} type=\"button\">Load</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t\t<p className=\"menuItem\"  onClick={ this.handleShowHelp }> Help { this.state.isShowHelp ? <FaChevronCircleUp/> : <FaChevronCircleDown/> }</p>\r\n\t\t\t\t{ \r\n\t\t\t\t\tthis.state.isShowHelp &&\r\n\t\t\t\t\t<div style={{fontSize: \"0.75em\", padding: \"0 0.25em\"}}>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Highlight</b> a part of the text to add an annotation.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<b>Click</b> an annotation to view it or modify it.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tUse the top <b>Append</b> bar to add another line to the main text body. Use the <b>Import Plaintext</b> option to append large blocks of text.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\tClick on the <b>trash can</b> to clear the body of text.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<p> \r\n\t\t\t\t\t\tSave the state of your notebook from <b>Export Annotations</b> and reload it using <b>Import Annotations</b>.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>}\r\n\t\t\t</div>\r\n\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"25%\"} }}>\r\n     \t\t\t\t<div className=\"menuBar\">\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\t\t    \t\t{ textbody }\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tvar a1 = new Annotation();\r\n\t\ta1.id = 1;\r\n\t\ta1.color = colors[1];\r\n\t\ta1.depth = 1;\r\n\t\ta1.startIndex = 19;\r\n\t\ta1.endIndex = 27;\r\n\t\ta1.description = \"cambiar - verb\\nto change\";\r\n\t\tvar a2 = new Annotation();\r\n\t\ta2.id = 2;\r\n\t\ta2.color = colors[0];\r\n\t\ta2.depth = 1;\r\n\t\ta2.startIndex = 42;\r\n\t\ta2.endIndex = 46;\r\n\t\ta2.description = \"emos/amos indicates that the pronoun is \\\"us\\\"\";\r\n\t\tvar a3 = new Annotation();\r\n\t\ta3.id = 3;\r\n\t\ta3.color = colors[1];\r\n\t\ta3.depth = 1;\r\n\t\ta3.startIndex = 99;\r\n\t\ta3.endIndex = 105;\r\n\t\ta3.description = \"cambiar\";\r\n\t\tvar a4 = new Annotation();\r\n\t\ta4.id = 4;\r\n\t\ta4.color = colors[3];\r\n\t\ta4.depth = 1;\r\n\t\ta4.startIndex = 146;\r\n\t\ta4.endIndex = 162;\r\n\t\ta4.description = \"Guatemalan activist and Nobel Peace prize winner\";\r\n\r\n\t\tthis.setState({\r\n\t\t\tANNOTATIONS: [a1, a2, a3, a4],\r\n\t\t\tannotation_id: 5,\r\n\t\t\tmaxDepth: 1,\r\n\t\t\ttext: \"Este mundo no va a cambiar a menos que estemos dispuestos a cambiar nosotros mismos\\nThe world won't change unless we're willing to change ourselves\\nRigoberta Menchu\",\r\n\t\t\ttextPanes:\r\n\t\t\t\t[\"Este mundo no va a \",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a1.id + a1.startIndex + a1.endIndex) }\r\n\t\t\t\t\t\tdepth={ a1.depth }\r\n\t\t\t\t\t\tannotation={ a1 }\r\n\t\t\t\t\t\tcolor={ a1.color }>\r\n\t\t\t\t\t\tcambiar\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" a menos que est\",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a2.id + a2.startIndex + a2.endIndex) }\r\n\t\t\t\t\t\tdepth={ a2.depth }\r\n\t\t\t\t\t\tannotation={ a2 }\r\n\t\t\t\t\t\tcolor={ a2.color }>\r\n\t\t\t\t\t\temos\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t\" dispuestos a cambiar nosotros mismos\",\r\n\t\t\t\t<br key={1}></br>,\r\n\t\t\t\t\"The world won't \",\r\n\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a3.id + a3.startIndex + a3.endIndex) }\r\n\t\t\t\t\t\tdepth={ a3.depth }\r\n\t\t\t\t\t\tannotation={ a3 }\r\n\t\t\t\t\t\tcolor={ a3.color }>\r\n\t\t\t\t\t\tchange\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \" unless we're willing to change ourselves\",\r\n\t\t\t\t <br key={2}></br>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ parseInt(\"\" + a4.id + a4.startIndex + a4.endIndex) }\r\n\t\t\t\t\t\tdepth={ a4.depth }\r\n\t\t\t\t\t\tannotation={ a4 }\r\n\t\t\t\t\t\tcolor={ a4.color }>\r\n\t\t\t\t\t\tRigoberta Menchu\r\n\t\t\t\t\t</AnnotationButton>,\r\n\t\t\t\t \"\",\r\n\t\t\t\t <br key={3}></br>]\r\n\t\t});\r\n\t\tthis.setState();\r\n\t}\r\n\r\n\thandleShowHelp() {\r\n\t\tthis.setState({ isShowHelp: !this.state.isShowHelp });\r\n\t}\r\n\r\n\thandleShowImport() {\r\n\t\tthis.setState({ isShowImport: !this.state.isShowImport });\r\n\t}\r\n\r\n\thandleShowImportAnnotations() {\r\n\t\tthis.setState({ isShowImportAnnotations: !this.state.isShowImportAnnotations });\r\n\t}\r\n\r\n\thandleShowExportAnnotations() {\r\n\t\tthis.setState({ isShowExportAnnotations: !this.state.isShowExportAnnotations });\r\n\t}\r\n\r\n\thandleImportAnnotations() {\r\n\t\tvar annotations = JSON.parse(document.getElementById(\"import-annotations\").value);\r\n\t\tannotations.ANNOTATIONS = this.regenerateAnnotations(annotations.ANNOTATIONS);\r\n\t\tannotations.textPanes = this.regenerateTextPanes(annotations.textPanes, annotations.ANNOTATIONS);\r\n\t\tthis.setState(annotations);\r\n\t}\r\n\r\n\tregenerateAnnotations(annotations) {\r\n\t\tvar regenerated = []\r\n\t\tvar temp;\r\n\t\tfor (var i=0; i<annotations.length; i++){\r\n\t\t\ttemp = new Annotation();\r\n\t\t\ttemp.id = annotations[i]._id; \r\n\t\t\ttemp.color = annotations[i]._color;\r\n\t\t\ttemp.depth = annotations[i]._depth; \r\n\t\t\ttemp.startIndex = annotations[i]._startIndex;\r\n\t\t\ttemp.endIndex = annotations[i]._endIndex; \r\n\t\t\ttemp.description = annotations[i]._description;\r\n\t\t\tregenerated.push(temp)\r\n\t\t}\r\n\t\treturn regenerated;\r\n\t}\r\n\r\n\tregenerateTextPanes(annotations, ann_refs) {\r\n\t\tvar regenerated = [];\r\n\t\tfor (var i=0; i<annotations.length; i++){\r\n\t\t\tif (typeof annotations[i] === 'string' || annotations[i] instanceof String) {\r\n\t\t\t\tregenerated.push(annotations[i]);\r\n\t\t\t}\r\n\t\t\telse if (annotations[i].type === \"br\") {\r\n\t\t\t\tregenerated.push(<br key={ annotations[i].key }></br>);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tregenerated.push(\r\n\t\t\t\t\t<AnnotationButton\r\n\t\t\t\t\t\tupdater={ this.handleRerender }\r\n\t\t\t\t\t\tdeleter={ this.handleDeleteAnnotation }\r\n\t\t\t\t\t\tkey={ annotations[i].key }\r\n\t\t\t\t\t\tdepth={ annotations[i].props.depth }\r\n\t\t\t\t\t\tannotation={ ann_refs[annotations[i].props.annotation._id - 1] }\r\n\t\t\t\t\t\tcolor={ annotations[i].props.annotation.color }>\r\n\t\t\t\t\t\t{ Array.isArray(annotations[i].props.children) ? \r\n\t\t\t\t\t\t\tthis.regenerateTextPanes(annotations[i].props.children, ann_refs) :\r\n\t\t\t\t\t\t\tthis.regenerateTextPanes([annotations[i].props.children], ann_refs)[0] }\r\n\t\t\t\t\t</AnnotationButton>);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn regenerated;\r\n\t}\r\n\r\n}","import React from 'react';\r\n\r\nimport MainText from './MainText';\r\n\r\nexport default class MainPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tisExample: true,\r\n\t\t\tsidebarOpen: false\r\n\t\t};\r\n\t\tthis.onSetSidebarOpen = this.onSetSidebarOpen.bind(this);\r\n\t\tthis.handleExample = this.handleExample.bind(this);\r\n\t}\r\n\r\n\tonSetSidebarOpen(open) {\r\n\t\tthis.setState({ sidebarOpen: open })\r\n\t}\r\n\r\n\thandleExample() {\r\n\t\tthis.setState({ isExample: true });\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn <MainText></MainText>;\r\n\t\t/*\r\n\t    return (\r\n\t    \t<div>\r\n\t    \t\t<Sidebar sidebar={ sidebarContent }\r\n\t\t\t        \topen={this.state.sidebarOpen}\r\n\t\t\t        \tonSetOpen={this.onSetSidebarOpen}\r\n\t\t\t        \tstyles={{ sidebar: { background: \"white\", width: \"10em\"} }}>\r\n     \t\t\t\t\r\n     \t\t\t\t<div className=\"menuBar\">\t\r\n\t     \t\t\t\t<button style={{ minHeight: \"2em\" }} onClick={() => this.onSetSidebarOpen(true)}>\r\n    \t     \t\t\t\t<FaBars/>\r\n        \t\t\t\t</button>\r\n        \t\t\t\t<span>\r\n        \t\t\t\t\tLangAnnotator\r\n        \t\t\t\t</span>\r\n\t\t    \t\t</div>\r\n\r\n\t\t    \t\t<MainText runExample={ this.state.isExample }></MainText>\r\n\r\n\t    \t\t</Sidebar>\r\n\t    \t</div>);\r\n\t    */\r\n\t}\r\n}","import React from 'react';\n//import logo from './logo.svg';\n\nimport MainPage from './components/MainPage';\n\nimport './App.css';\nimport './components/TextBody.css';\n\nfunction App() {\n  return (\n    <MainPage></MainPage>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}